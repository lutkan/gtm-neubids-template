___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "NeuBidsPixel",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "NeuBids Pixel Id",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "pixelId",
    "displayName": "Pixel Id",
    "simpleValueType": true,
    "help": "You can get your Pixel Id from https://console.neubids.com",
    "notSetText": "Pixel Id is mandatory."
  },
  {
    "type": "TEXT",
    "name": "order",
    "displayName": "Order",
    "simpleValueType": true,
    "canBeEmptyString": true,
    "help": "Enter order id or number"
  },
  {
    "type": "TEXT",
    "name": "value",
    "displayName": "Value",
    "simpleValueType": true,
    "help": "Enter order value",
    "canBeEmptyString": false
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const sendPixel = require('sendPixel');
const getCookieValues = require('getCookieValues');
const getTimestampMillis = require('getTimestampMillis');

const neuBidsCookieId = '_neuaid';

var aid = getCookieValues(neuBidsCookieId)[0];
if (aid === undefined) {
  aid = "";
}

sendPixel("https://tracking-api.neubids.com/pxl" +
          "?id=" + data.pixelId + 
          "&o=" + data.order + 
          "&v=" + data.value +
          "&aid=" + aid + 
          "&ts=" + getTimestampMillis(),
  data.gtmOnSuccess,
  data.gtmOnFailure
);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://tracking-api.neubids.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Untitled test 1
  code: |-
    const log = require('logToConsole');

    const mockData = {
      pixelId: '32-75',
      order: '123456',
      gtmOnSuccess: function() {
        log('gtmOnSuccess called');
      },
      gtmOnFailure: function() {
        log('gtmOnFailure called');
      }
    };

    runCode(mockData);


___NOTES___

Created on 9/27/2025, 8:40:58 PM


